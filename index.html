<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Felices 8 Meses, Mi Amor</title>
    <style>
        /* Estilos generales y fuentes */
        body {
            font-family: 'Georgia', serif;
            background-color: #fdefee;
            color: #5c3b42;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* --- Pantalla de Carga --- */
        #loader {
            position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 9999;
            background-color: #fdefee; display: flex; justify-content: center; align-items: center;
            transition: opacity 0.75s, visibility 0.75s;
        }
        .loader-heart { font-size: 100px; color: #d16b86; animation: heartbeat-loader 1.5s infinite; }
        @keyframes heartbeat-loader { 0%, 28%, 70% { transform: scale(1); } 14%, 42% { transform: scale(1.3); } }
        .loader-hidden { opacity: 0; visibility: hidden; }

        /* Contenedor principal */
        .container {
            max-width: 800px; margin: 40px auto; padding: 20px; background-color: #ffffff;
            border-radius: 15px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05); position: relative; z-index: 1;
        }

        /* Encabezados de Sección (h2) */
        h2 { color: #d16b86; font-family: 'Parisienne', cursive; font-size: 2.5em; text-align: center; margin-bottom: 10px; }
        @import url('https://fonts.googleapis.com/css2?family=Parisienne&display=swap');

        /* Encabezado */
        header { text-align: center; padding-bottom: 20px; border-bottom: 2px dashed #f5c0c0; }
        h1 { color: #d16b86; font-size: 3em; font-family: 'Parisienne', cursive; animation: heartbeat 1.5s infinite; }

        /* Contador */
        .counter { background-color: #f5c0c0; color: white; text-align: center; padding: 15px; margin: 20px 0; border-radius: 10px; font-size: 1.2em; }
        .counter strong { font-size: 1.5em; }

        /* Carta */
        .letter { line-height: 1.8; text-align: justify; padding: 0 20px; }

        /* Galería */
        .gallery { margin-top: 40px; }
        .gallery-images { display: flex; justify-content: space-around; flex-wrap: wrap; gap: 15px; margin-top: 20px; }
        .gallery-images img { width: 220px; height: 220px; object-fit: cover; border-radius: 10px; border: 5px solid white; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .gallery-images img:hover { transform: scale(1.08); box-shadow: 0 8px 30px rgba(209, 107, 134, 0.3); }

        /* --- Estilos Juego Corazones --- */
        .game { margin-top: 40px; text-align: center; border-top: 2px dashed #f5c0c0; padding-top: 20px; }
        #game-area { width: 100%; max-width: 600px; height: 400px; background-color: #fdefee; border: 3px solid #f5c0c0; border-radius: 10px; margin: 20px auto; position: relative; overflow: hidden; }
        #player { position: absolute; bottom: 10px; width: 100px; height: 20px; background-color: #d16b86; border-radius: 10px; }
        .falling-heart { position: absolute; font-size: 24px; color: #d16b86; user-select: none; }
        #game-info { font-size: 1.2em; color: #5c3b42; }
        #start-button { padding: 10px 25px; font-size: 1.1em; font-family: 'Georgia', serif; color: white; background-color: #d16b86; border: none; border-radius: 8px; cursor: pointer; transition: background-color 0.3s; margin-top: 10px; }
        #start-button:hover { background-color: #c25975; }
        #game-controls { display: none; justify-content: space-between; width: 200px; margin: 15px auto 0; }
        .control-btn { width: 70px; height: 70px; font-size: 2.5em; color: white; background-color: #f5c0c0; border: none; border-radius: 50%; user-select: none; -webkit-user-select: none; touch-action: manipulation; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        
        /* --- Estilos Juego Idle Tycoon --- */
        .idle-game { margin-top: 40px; text-align: center; border-top: 2px dashed #f5c0c0; padding-top: 20px; }
        #love-display { background-color: #fdefee; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        #love-counter { font-size: 2.5em; color: #d16b86; margin: 0; }
        #love-per-second { font-size: 1.1em; margin: 5px 0 0; }
        #click-love-btn { width: 150px; height: 150px; font-size: 5em; color: #d16b86; background-color: transparent; border: 5px dashed #f5c0c0; border-radius: 50%; cursor: pointer; transition: transform 0.1s; }
        #click-love-btn:active { transform: scale(0.9); }
        #upgrades-container { margin-top: 20px; display: flex; flex-direction: column; gap: 10px; }
        .upgrade { display: flex; justify-content: space-between; align-items: center; background-color: #fff; padding: 10px 15px; border: 2px solid #fdefee; border-radius: 8px; }
        .upgrade-info { text-align: left; }
        .upgrade-info strong { font-size: 1.2em; }
        .buy-upgrade-btn { padding: 10px 15px; font-family: 'Georgia', serif; background-color: #f5c0c0; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .buy-upgrade-btn:disabled { background-color: #ddd; cursor: not-allowed; }

        /* Pie de página */
        footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px dashed #f5c0c0; font-style: italic; }

        /* Animación corazones flotantes */
        .heart { position: absolute; font-size: 20px; color: #d16b86; animation: floatUp 10s infinite linear; z-index: 0; }
        @keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-100vh); opacity: 0; } }
        @keyframes heartbeat { 0%, 28%, 70% { transform: scale(1); } 14%, 42% { transform: scale(1.1); } }

        /* Diseño Responsivo */
        @media (max-width: 768px) {
            .container { margin: 20px 15px; padding: 15px; }
            h1 { font-size: 2.5em; }
            .gallery-images { flex-direction: column; align-items: center; }
            .gallery-images img { width: 90%; height: auto; aspect-ratio: 1 / 1; }
            .letter { padding: 0 10px; }
            #game-area { height: 350px; }
            .upgrade { flex-direction: column; align-items: stretch; gap: 10px; }
        }
    </style>
</head>
<body>

    <div id="loader"><div class="loader-heart">❤</div></div>
    <div class="hearts-container"></div>

    <div class="container">
        <header>
            <h1>Felices 8 Meses, Mi Vida</h1>
            <p>Un pequeño regalo para la persona que ilumina mis días.</p>
        </header>

        <div class="counter">Llevamos juntos <strong>243</strong> días maravillosos (¡y contando!)</div>

        <section class="letter">
            <p>Mi amor,</p>
            <p>Parece que fue ayer cuando empezamos esta aventura, y ya han pasado 8 meses. Cada día a tu lado es un regalo que no doy por sentado. Quería crear este pequeño rincón en internet solo para ti, para recordarte lo increíblemente especial que eres para mí y celebrar todo lo que hemos construido juntos.</p>
            <p>Gracias por tus risas, por tu apoyo incondicional y por hacer de mi mundo un lugar mucho más bonito. Eres mi persona favorita, mi mejor amiga y el amor de mi vida.</p>
            <p>Con todo mi amor,</p>
            <p><strong>El amor de tu vida</strong></p>
        </section>

        <section class="gallery">
            <h2>Nuestros Momentos</h2>
            <div class="gallery-images">
                <img src="juntos.jpg" alt="Recuerdo Bonito 1">
                <img src="corazon.jpg" alt="Recuerdo Bonito 2">
                <img src="ella.jpg" alt="Recuerdo Bonito 3">
            </div>
        </section>

        <!-- Juego Atrapa Corazones -->
        <section class="game">
            <h2>Juego: Atrapa Nuestro Amor</h2>
            <p>¡Consigue la puntuación más alta!</p>
            <div id="game-area"><div id="player"></div></div>
            <div id="game-info">
                <p>Puntuación: <span id="score">0</span> | Tiempo: <span id="timer">30</span>s</p>
                <p><strong>Récord: <span id="high-score">0</span></strong></p>
                <button id="start-button">Jugar</button>
            </div>
            <div id="game-controls">
                <button id="left-btn" class="control-btn">&larr;</button>
                <button id="right-btn" class="control-btn">&rarr;</button>
            </div>
        </section>
        
        <!-- Juego Idle Tycoon -->
        <section class="idle-game">
            <h2>Juego: Construyendo Nuestro Amor</h2>
            <p>Genera amor y compra recuerdos para crecer juntos.</p>
            <div id="love-display">
                <h3 id="love-counter">0</h3>
                <p>Amor por segundo: <span id="love-per-second">0</span></p>
            </div>
            <button id="click-love-btn">❤</button>
            <div id="upgrades-container"></div>
        </section>
        
        <footer>
            <p>Te amo más de lo que las palabras pueden expresar.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Script de Carga y Corazones Flotantes ---
            const loader = document.querySelector('#loader');
            setTimeout(() => {
                loader.classList.add('loader-hidden');
                loader.addEventListener('transitionend', () => { if (document.body.contains(loader)) document.body.removeChild(loader); });
            }, 2500);

            const bodyContainer = document.querySelector('body');
            setInterval(() => {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.innerHTML = '❤';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
                bodyContainer.appendChild(heart);
                setTimeout(() => { heart.remove(); }, 10000);
            }, 500);

            // --- Lógica del Juego "Atrapa Nuestro Amor" ---
            const gameArea = document.getElementById('game-area');
            const player = document.getElementById('player');
            const scoreDisplay = document.getElementById('score');
            const timerDisplay = document.getElementById('timer');
            const startButton = document.getElementById('start-button');
            const controls = document.getElementById('game-controls');
            const leftBtn = document.getElementById('left-btn');
            const rightBtn = document.getElementById('right-btn');
            const highScoreDisplay = document.getElementById('high-score');

            const PLAYER_SPEED = 8;
            const HIGH_SCORE_KEY = 'heartCatcherHighScore';
            let score = 0, timeLeft = 30, highScore = 0;
            let gameInterval, heartInterval, moveInterval;

            // Cargar récord al iniciar
            highScore = localStorage.getItem(HIGH_SCORE_KEY) || 0;
            highScoreDisplay.textContent = highScore;
            player.style.left = (gameArea.offsetWidth / 2 - player.offsetWidth / 2) + 'px';

            function movePlayer(direction) {
                const playerLeft = parseInt(player.style.left);
                const gameWidth = gameArea.offsetWidth;
                const playerWidth = player.offsetWidth;
                if (direction === 'left') player.style.left = Math.max(0, playerLeft - PLAYER_SPEED) + 'px';
                if (direction === 'right') player.style.left = Math.min(gameWidth - playerWidth, playerLeft + PLAYER_SPEED) + 'px';
            }

            function createFallingHeart() {
                const heart = document.createElement('div');
                heart.classList.add('falling-heart');
                heart.innerHTML = '❤';
                heart.style.left = Math.random() * (gameArea.offsetWidth - 30) + 'px';
                heart.style.top = '-30px';
                gameArea.appendChild(heart);
                animateHeart(heart);
            }

            function animateHeart(heart) {
                let speed = Math.random() * 3 + 2;
                function fall() {
                    if (!heart.parentElement) return;
                    const heartTop = parseInt(heart.style.top, 10);
                    if (heartTop > gameArea.offsetHeight) { heart.remove(); return; }
                    heart.style.top = (heartTop + speed) + 'px';
                    
                    const playerRect = player.getBoundingClientRect();
                    const heartRect = heart.getBoundingClientRect();
                    if (heartRect.bottom > playerRect.top && heartRect.top < playerRect.bottom && heartRect.left < playerRect.right && heartRect.right > playerRect.left) {
                        heart.remove();
                        score++;
                        scoreDisplay.textContent = score;
                    } else {
                        requestAnimationFrame(fall);
                    }
                }
                requestAnimationFrame(fall);
            }

            function startGame() {
                score = 0; timeLeft = 30;
                scoreDisplay.textContent = score;
                timerDisplay.textContent = timeLeft;
                startButton.style.display = 'none';
                controls.style.display = 'flex';
                heartInterval = setInterval(createFallingHeart, 800);
                gameInterval = setInterval(() => {
                    timeLeft--;
                    timerDisplay.textContent = timeLeft;
                    if (timeLeft <= 0) endGame();
                }, 1000);
            }

            function endGame() {
                clearInterval(gameInterval); clearInterval(heartInterval); clearInterval(moveInterval);
                if (score > highScore) {
                    highScore = score;
                    localStorage.setItem(HIGH_SCORE_KEY, highScore);
                    highScoreDisplay.textContent = highScore;
                    alert(`¡Nuevo Récord! Atrapaste ${score} corazones. ¡Nuestro amor es inmenso!`);
                } else {
                    alert(`¡Juego terminado! Atrapaste ${score} corazones.`);
                }
                startButton.style.display = 'block';
                controls.style.display = 'none';
                document.querySelectorAll('.falling-heart').forEach(h => h.remove());
            }

            const startMoving = dir => { if(moveInterval) clearInterval(moveInterval); moveInterval = setInterval(() => movePlayer(dir), 20); };
            const stopMoving = () => clearInterval(moveInterval);
            ['mousedown', 'touchstart'].forEach(evt => {
                leftBtn.addEventListener(evt, (e) => { e.preventDefault(); startMoving('left'); });
                rightBtn.addEventListener(evt, (e) => { e.preventDefault(); startMoving('right'); });
            });
            ['mouseup', 'touchend'].forEach(evt => window.addEventListener(evt, stopMoving));
            startButton.addEventListener('click', startGame);

            // --- Lógica del Juego "Idle Tycoon" ---
            const loveCounter = document.getElementById('love-counter');
            const lpsDisplay = document.getElementById('love-per-second');
            const clickBtn = document.getElementById('click-love-btn');
            const upgradesContainer = document.getElementById('upgrades-container');
            const IDLE_SAVE_KEY = 'idleTycoonSave';

            let love = 0;
            let lovePerSecond = 0;
            let upgrades = [
                { id: 'hugs', name: 'Abrazos', cost: 15, baseCost: 15, count: 0, production: 0.1 },
                { id: 'kisses', name: 'Besos', cost: 100, baseCost: 100, count: 0, production: 1 },
                { id: 'letters', name: 'Cartas de Amor', cost: 1100, baseCost: 1100, count: 0, production: 8 },
                { id: 'dates', name: 'Citas Especiales', cost: 12000, baseCost: 12000, count: 0, production: 47 },
                { id: 'trips', name: 'Viajes Juntos', cost: 130000, baseCost: 130000, count: 0, production: 260 }
            ];

            function clickLove() {
                love++;
                updateDisplays();
            }

            function buyUpgrade(index) {
                const upgrade = upgrades[index];
                if (love >= upgrade.cost) {
                    love -= upgrade.cost;
                    upgrade.count++;
                    upgrade.cost = Math.ceil(upgrade.baseCost * Math.pow(1.15, upgrade.count));
                    calculateLPS();
                    renderUpgrades();
                    updateDisplays();
                }
            }
            
            function calculateLPS() {
                lovePerSecond = upgrades.reduce((total, upg) => total + (upg.count * upg.production), 0);
            }

            function updateDisplays() {
                loveCounter.textContent = Math.floor(love).toLocaleString();
                lpsDisplay.textContent = lovePerSecond.toFixed(1).toLocaleString();
                upgrades.forEach((upg, i) => {
                    const btn = document.getElementById(`buy-${upg.id}`);
                    if (btn) btn.disabled = love < upg.cost;
                });
            }

            function renderUpgrades() {
                upgradesContainer.innerHTML = '';
                upgrades.forEach((upg, i) => {
                    upgradesContainer.innerHTML += `
                        <div class="upgrade">
                            <div class="upgrade-info">
                                <strong>${upg.name}</strong>
                                <p>Tienes: ${upg.count} | Costo: ${upg.cost.toLocaleString()}</p>
                            </div>
                            <button id="buy-${upg.id}" class="buy-upgrade-btn" onclick="buyUpgrade(${i})">Comprar</button>
                        </div>
                    `;
                });
            }
            
            // --- Funciones de Guardado y Carga del Idle Game ---
            function saveGame() {
                const gameState = { love, upgrades };
                localStorage.setItem(IDLE_SAVE_KEY, JSON.stringify(gameState));
            }

            function loadGame() {
                const savedGame = localStorage.getItem(IDLE_SAVE_KEY);
                if (savedGame) {
                    const gameState = JSON.parse(savedGame);
                    love = gameState.love;
                    upgrades = gameState.upgrades;
                }
                calculateLPS();
                renderUpgrades();
                updateDisplays();
            }
            
            // Inicializar el juego Idle
            clickBtn.addEventListener('click', clickLove);
            window.buyUpgrade = buyUpgrade; // Hacer la función accesible globalmente para el onclick
            loadGame();

            // Game Loop principal (actualiza amor y guarda)
            setInterval(() => {
                love += lovePerSecond / 10; // Dividimos para una actualización más suave
                updateDisplays();
            }, 100);

            setInterval(saveGame, 5000); // Guardar cada 5 segundos
        });
    </script>
</body>
</html>
